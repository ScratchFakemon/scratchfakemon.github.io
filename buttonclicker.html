<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Fakemon's Website | Button Clicker</title>

    <script>
      let clicks = 0;
      let changeLsSaveNotice = [false, null];
      try {
        clicks = parseInt(localStorage.getItem("clicks")) || 0; // Click count
        changeLsSaveNotice = [false, null];
      } catch (e) {
        clicks = 0;
        changeLsSaveNotice = [true, "unsupported"];
        console.error(e);
      }
      let btn; // Button elem, to be defined later
      document.addEventListener("DOMContentLoaded", () => {
        localStorage.setItem("clicks", clicks);
        btn = document.getElementById("clickme");
        let lsSaveNotice = document.getElementById("lsSaveNotice");
        if (changeLsSaveNotice[0]) {
          switch (changeLsSaveNotice[1]) {
            case "unsupported":
              lsSaveNotice.innerHTML =
                "This game would normally use local storage to save your click count, but, for some reason, it's unavailable.<br>Your browser may not have it, or you're in incognito/private browsing mode.<br>If you're a nerd, you can check the console for the error.";
          }
        }
        if (clicks != 0) {
          btn.innerHTML = `Clicks: ${clicks}`;
        }
      });

      function btnClicked() {
        clicks++;
        btn.innerHTML = `Clicks: ${clicks}`;
        localStorage.setItem("clicks", clicks);
      }
    </script>
    <script src="UniversalElements.js">
      // Script for automatically filling element data across pages (this is an anti-React household)
    </script>
  </head>
  <body>
    <div class="main">
      <div class="navbar">
        <!--UniversalElements.js will load elements here-->
      </div>
      <img
        src="https://uploads.scratch.mit.edu/get_image/user/117698316_99x99.png"
        class="pfp"
      />
      <h1>Button Clicker</h1>
      <i>The Ultimate Game to Cure your Boredom!</i>
      <br />
      - Scratch_Fakemon
      <br />
      <button id="clickme" onclick="btnClicked()">Click Me!</button>
      <small id="lsSaveNotice"
        >Your progress will be saved. Please note that your browser may clear
        local storage data automatically.</small
      >

      <hr class="but" />
      <div class="links">
        <!--Also UniversalElements.js-->
      </div>
    </div>
  </body>
</html>
